{% extends 'base.html' %}

{% block title %}Logged Expenses{% endblock %}

{% block content %}
<h2>Logged Expenses</h2>

<!-- Display total expense amount including GST -->
<p><strong>Total Expense Amount (including GST):</strong> {{ total_expense_amount }}</p>

<!-- Expense Table -->
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Expense Type</th>
            <th>Quantity</th>
            <th>Item Name</th>
            <th>Unit Price</th>
            <th>Invoice Number</th>
            <th>Seller GSTN</th>
            <th>Seller Name</th>
            <th>GST Amount</th>
            <th>Total Amount (Including GST)</th>
            <th>Logged By</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for expense in expenses %}
        <tr>
            <td>{{ expense.expense_type }}</td>
            <td>{{ expense.quantity }}</td>
            <td>{{ expense.item_name }}</td>
            <td>{{ expense.unit_price }}</td>
            <td>{{ expense.invoice_number }}</td>
            <td>{{ expense.seller_GSTN }}</td>
            <td>{{ expense.seller_name }}</td>
            <td>{{ expense.gst_amount }}</td>
            <td>{{ expense.total_amount }}</td>
            <td>{{ expense.employee.name }}</td>
            <td>
                <a href="{{ url_for('main.update_expense', expense_id=expense.id) }}" class="btn btn-primary btn-sm">Edit</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Button to log a new expense -->
<a href="{{ url_for('main.add_expense') }}" class="btn btn-success">Log New Expense</a>
{% endblock %}
